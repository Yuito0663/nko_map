<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Карта добрых дел - НКО городов Росатома</title>
    <meta name="description" content="Интерактивная карта некоммерческих организаций в городах присутствия Росатома">
    <link rel="stylesheet" href="/style.css">
    <link rel="icon" type="image/svg+xml" href="../img/favicon.svg">
    <link rel="alternate icon" href="../img/favicon.ico" type="image/x-icon">
    <title>Карта добрых дел - НКО городов Росатома</title>
    <!-- Leaflet CSS & JS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <img src="data:image/png;base64,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" alt="Росатом"> class="logo-image">
                <span class="logo-text">Карта добрых дел</span>
            </div> 
            <div class="nav-buttons">
                <button class="btn btn-outline" id="helpBtn">
                    <i class="fas fa-question-circle"></i> Помощь
                </button>
                <button class="btn btn-primary" id="loginBtn">
                    <i class="fas fa-user"></i> Войти
                </button>
                <button class="btn btn-secondary" id="addNkoBtn">
                    <i class="fas fa-plus"></i> Добавить НКО
                </button>
            </div>
        </header>
        
        <div class="main-content">
            <button class="toggle-sidebar btn btn-primary">
                <i class="fas fa-filter"></i> Фильтры
            </button>
            
            <aside class="sidebar">
                <div class="sidebar-section">
                    <h3 class="sidebar-title">Поиск</h3>
                    <div class="filter-group">
                        <input type="text" class="search-input" placeholder="Название НКО..." id="searchInput">
                    </div>
                </div>
                
                <div class="sidebar-section">
                    <h3 class="sidebar-title">Города</h3>
                    <div class="filter-group">
                        <select class="select-input" id="citySelect">
                            <option value="">Все города</option>
                        </select>
                    </div>
                </div>
                
                <div class="sidebar-section">
                    <h3 class="sidebar-title">Категории</h3>
                    <div class="checkbox-group" id="categoryFilter">
                    </div>
                </div>
                
                <div class="sidebar-section">
                    <h3 class="sidebar-title">Организации</h3>
                    <div class="nko-list" id="nkoList">
                        <div class="loading">Загрузка организаций...</div>
                    </div>
                </div>
            </aside>
            
            <div class="map-container">
                <div id="map"></div>
                
                <div class="nko-card" id="nkoCard">
                    <div class="card-header">
                        <div>
                            <h3 class="card-title" id="cardTitle">Название организации</h3>
                            <span class="card-category" id="cardCategory">Категория</span>
                        </div>
                        <button class="close-card" id="closeCard">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    
                    <div class="card-content">
                        <div class="card-field">
                            <div class="field-icon">
                                <i class="fas fa-info-circle"></i>
                            </div>
                            <div>
                                <p id="cardDescription">Описание деятельности организации</p>
                                <p class="mt-10" id="cardVolunteer">Функционал волонтеров</p>
                            </div>
                        </div>
                        
                        <div class="card-field">
                            <div class="field-icon">
                                <i class="fas fa-map-marker-alt"></i>
                            </div>
                            <div id="cardAddress">Адрес организации</div>
                        </div>
                        
                        <div class="card-field">
                            <div class="field-icon">
                                <i class="fas fa-phone"></i>
                            </div>
                            <div id="cardPhone">Контактный телефон</div>
                        </div>
                        
                        <div class="card-field">
                            <div class="field-icon">
                                <i class="fas fa-globe"></i>
                            </div>
                            <div id="cardWebsite">Сайт организации</div>
                        </div>
                    </div>
                    
                    <div class="social-links" id="cardSocial">
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Auth Modal -->
    <div class="modal" id="authModal">
        <div class="modal-content">
            <div class="tabs">
                <div class="tab active" data-tab="login">Вход</div>
                <div class="tab" data-tab="register">Регистрация</div>
            </div>
            
            <div class="modal-header">
                <h2 class="modal-title" id="modalTitle">Вход в аккаунт</h2>
            </div>
            
            <form id="authForm">
                <div class="form-group">
                    <label class="form-label" for="email">Электронная почта</label>
                    <input type="email" class="form-input" id="email" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="password">Пароль</label>
                    <input type="password" class="form-input" id="password" required>
                </div>
                
                <div class="form-group" id="nameFields" style="display: none;">
                    <label class="form-label" for="firstName">Имя</label>
                    <input type="text" class="form-input" id="firstName">
                    
                    <label class="form-label" for="lastName">Фамилия</label>
                    <input type="text" class="form-input" id="lastName">
                </div>
                
                <div class="form-actions">
                    <a href="#" class="form-link" id="forgotPassword">Забыли пароль?</a>
                    <button type="submit" class="btn btn-primary" id="submitAuth">
                        Войти
                    </button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Add NKO Modal -->
    <div class="modal" id="addNkoModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Добавить новую организацию</h2>
            </div>
            
            <form id="addNkoForm">
                <div class="form-group">
                    <label class="form-label" for="nkoName">Название организации *</label>
                    <input type="text" class="form-input" id="nkoName" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="nkoCategory">Категория деятельности *</label>
                    <select class="form-input" id="nkoCategory" required>
                        <option value="">Выберите категорию</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="nkoDescription">Описание деятельности *</label>
                    <textarea class="form-input" id="nkoDescription" rows="3" required placeholder="2-3 предложения о деятельности организации"></textarea>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="nkoVolunteer">Функционал волонтеров *</label>
                    <textarea class="form-input" id="nkoVolunteer" rows="2" required placeholder="Чем могут помочь волонтеры"></textarea>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="nkoCity">Город *</label>
                    <select class="form-input" id="nkoCity" required>
                        <option value="">Выберите город</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="nkoAddress">Адрес *</label>
                    <input type="text" class="form-input" id="nkoAddress" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="nkoPhone">Телефон</label>
                    <input type="tel" class="form-input" id="nkoPhone">
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="nkoWebsite">Веб-сайт</label>
                    <input type="url" class="form-input" id="nkoWebsite" placeholder="https://">
                </div>

                <div class="form-group">
                    <label class="form-label">Координаты на карте</label>
                    <div class="map-picker" id="mapPicker" style="height: 200px; margin-top: 10px; border: 1px solid #ddd; border-radius: 4px;">
                        <!-- Small map for coordinate selection -->
                    </div>
                    <div class="coordinates-display">
                        <span>Широта: <span id="latDisplay">55.75</span></span>
                        <span>Долгота: <span id="lngDisplay">37.62</span></span>
                    </div>
                </div>
                
                <div class="form-actions">
                    <button type="button" class="btn btn-outline" id="cancelAddNko">Отмена</button>
                    <button type="submit" class="btn btn-primary">Отправить на модерацию</button>
                </div>
            </form>
        </div>
    </div>

<!-- Profile Modal -->
<div class="modal" id="profileModal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 class="modal-title">Личный кабинет</h2>
            <button class="close-modal" id="closeProfileModal">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="profile-content">
            <div class="profile-header">
                <div class="avatar">
                    <i class="fas fa-user-circle"></i>
                </div>
                <div class="profile-info">
                    <h3 id="profileName">Имя Фамилия</h3>
                    <span class="user-role" id="profileRole">Пользователь</span>
                    <p id="profileEmail">email@example.com</p>
                </div>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="statTotal">0</div>
                    <div class="stat-label">Всего НКО</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="statApproved">0</div>
                    <div class="stat-label">Одобрено</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="statPending">0</div>
                    <div class="stat-label">На модерации</div>
                </div>
            </div>

            <div class="profile-section">
                <h4>Мои организации</h4>
                <div class="user-npos" id="userNposList">
                    <div class="loading">Загрузка...</div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Admin Panel Modal -->
<div class="modal" id="adminModal">
    <div class="modal-content admin-modal">
        <div class="modal-header">
            <h2 class="modal-title">Панель администратора</h2>
            <button class="close-modal" id="closeAdminModal">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="admin-tabs">
            <div class="admin-tab active" data-tab="moderation">Модерация</div>
            <div class="admin-tab" data-tab="statistics">Статистика</div>
            <div class="admin-tab" data-tab="users">Пользователи</div>
        </div>

        <div class="admin-content">
            <!-- Moderation Tab -->
            <div class="admin-tab-content active" id="moderationTab">
                <div class="moderation-header">
                    <h3>Организации на модерации</h3>
                    <div class="moderation-stats">
                        <span class="badge pending" id="pendingCount">0 на проверке</span>
                    </div>
                </div>
                <div class="moderation-list" id="moderationList">
                    <div class="loading">Загрузка...</div>
                </div>
            </div>

            <!-- Statistics Tab -->
            <div class="admin-tab-content" id="statisticsTab">
                <h3>Общая статистика</h3>
                <div class="stats-grid admin-stats">
                    <div class="stat-card">
                        <div class="stat-number" id="adminTotalNPOs">0</div>
                        <div class="stat-label">Всего НКО</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="adminApprovedNPOs">0</div>
                        <div class="stat-label">Одобрено</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="adminPendingNPOs">0</div>
                        <div class="stat-label">На модерации</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="adminTotalUsers">0</div>
                        <div class="stat-label">Пользователей</div>
                    </div>
                </div>
            </div>

            <!-- Users Tab -->
            <div class="admin-tab-content" id="usersTab">
                <h3>Пользователи системы</h3>
                <div class="users-list" id="usersList">
                    <div class="loading">Загрузка...</div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- NPO Status Badges (добавьте в CSS классы) -->
<style>
.status-badge {
    padding: 4px 8px;
    border-radius: 12px;
    font-size: 12px;
    font-weight: 500;
}

.status-pending {
    background-color: #ffc107;
    color: #000;
}

.status-approved {
    background-color: #28a745;
    color: #fff;
}

.status-rejected {
    background-color: #dc3545;
    color: #fff;
}

.user-role {
    padding: 4px 8px;
    border-radius: 12px;
    font-size: 12px;
    font-weight: 500;
}

.role-user {
    background-color: #6c757d;
    color: #fff;
}

.role-admin {
    background-color: #007bff;
    color: #fff;
}
</style>
    <script src="/script.js"></script>
</body>
</html>