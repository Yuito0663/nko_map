<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Карта добрых дел - НКО городов Росатома</title>
    <meta name="description" content="Интерактивная карта некоммерческих организаций в городах присутствия Росатома">
    <link rel="stylesheet" href="/style.css">
    <!-- 2ГИС Карты -->
    <link rel="stylesheet" href="https://cdn.2gis.ru/map/1.0/core.css">
    <script src="https://cdn.2gis.ru/map/1.0/core.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <i class="fas fa-hand-holding-heart logo-icon"></i>
                <span class="logo-text">Карта добрых дел</span>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-outline" id="helpBtn">
                    <i class="fas fa-question-circle"></i> Помощь
                </button>
                <button class="btn btn-primary" id="loginBtn">
                    <i class="fas fa-user"></i> Войти
                </button>
                <button class="btn btn-secondary" id="addNkoBtn">
                    <i class="fas fa-plus"></i> Добавить НКО
                </button>
            </div>
            <button class="mobile-menu">
                <i class="fas fa-bars"></i>
            </button>
        </header>
        
        <div class="main-content">
            <button class="toggle-sidebar btn btn-primary">
                <i class="fas fa-filter"></i> Фильтры
            </button>
            
            <aside class="sidebar">
                <div class="sidebar-section">
                    <h3 class="sidebar-title">Поиск</h3>
                    <div class="filter-group">
                        <input type="text" class="search-input" placeholder="Название НКО..." id="searchInput">
                    </div>
                </div>
                
                <div class="sidebar-section">
                    <h3 class="sidebar-title">Города</h3>
                    <div class="filter-group">
                        <select class="select-input" id="citySelect">
                            <option value="">Все города</option>
                        </select>
                    </div>
                </div>
                
                <div class="sidebar-section">
                    <h3 class="sidebar-title">Категории</h3>
                    <div class="checkbox-group" id="categoryFilter">
                    </div>
                </div>
                
                <div class="sidebar-section">
                    <h3 class="sidebar-title">Организации</h3>
                    <div class="nko-list" id="nkoList">
                        <div class="loading">Загрузка организаций...</div>
                    </div>
                </div>
            </aside>
            
            <div class="map-container">
                <div id="map"></div>
                
                <div class="nko-card" id="nkoCard">
                    <div class="card-header">
                        <div>
                            <h3 class="card-title" id="cardTitle">Название организации</h3>
                            <span class="card-category" id="cardCategory">Категория</span>
                        </div>
                        <button class="close-card" id="closeCard">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    
                    <div class="card-content">
                        <div class="card-field">
                            <div class="field-icon">
                                <i class="fas fa-info-circle"></i>
                            </div>
                            <div>
                                <p id="cardDescription">Описание деятельности организации</p>
                                <p class="mt-10" id="cardVolunteer">Функционал волонтеров</p>
                            </div>
                        </div>
                        
                        <div class="card-field">
                            <div class="field-icon">
                                <i class="fas fa-map-marker-alt"></i>
                            </div>
                            <div id="cardAddress">Адрес организации</div>
                        </div>
                        
                        <div class="card-field">
                            <div class="field-icon">
                                <i class="fas fa-phone"></i>
                            </div>
                            <div id="cardPhone">Контактный телефон</div>
                        </div>
                        
                        <div class="card-field">
                            <div class="field-icon">
                                <i class="fas fa-globe"></i>
                            </div>
                            <div id="cardWebsite">Сайт организации</div>
                        </div>
                    </div>
                    
                    <div class="social-links" id="cardSocial">
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Auth Modal -->
    <div class="modal" id="authModal">
        <div class="modal-content">
            <div class="tabs">
                <div class="tab active" data-tab="login">Вход</div>
                <div class="tab" data-tab="register">Регистрация</div>
            </div>
            
            <div class="modal-header">
                <h2 class="modal-title" id="modalTitle">Вход в аккаунт</h2>
            </div>
            
            <form id="authForm">
                <div class="form-group">
                    <label class="form-label" for="email">Электронная почта</label>
                    <input type="email" class="form-input" id="email" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="password">Пароль</label>
                    <input type="password" class="form-input" id="password" required>
                </div>
                
                <div class="form-group" id="nameFields" style="display: none;">
                    <label class="form-label" for="firstName">Имя</label>
                    <input type="text" class="form-input" id="firstName">
                    
                    <label class="form-label" for="lastName">Фамилия</label>
                    <input type="text" class="form-input" id="lastName">
                </div>
                
                <div class="form-actions">
                    <a href="#" class="form-link" id="forgotPassword">Забыли пароль?</a>
                    <button type="submit" class="btn btn-primary" id="submitAuth">
                        Войти
                    </button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Add NKO Modal -->
    <div class="modal" id="addNkoModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Добавить новую организацию</h2>
            </div>
            
            <form id="addNkoForm">
                <div class="form-group">
                    <label class="form-label" for="nkoName">Название организации *</label>
                    <input type="text" class="form-input" id="nkoName" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="nkoCategory">Категория деятельности *</label>
                    <select class="form-input" id="nkoCategory" required>
                        <option value="">Выберите категорию</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="nkoDescription">Описание деятельности *</label>
                    <textarea class="form-input" id="nkoDescription" rows="3" required placeholder="2-3 предложения о деятельности организации"></textarea>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="nkoVolunteer">Функционал волонтеров *</label>
                    <textarea class="form-input" id="nkoVolunteer" rows="2" required placeholder="Чем могут помочь волонтеры"></textarea>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="nkoCity">Город *</label>
                    <select class="form-input" id="nkoCity" required>
                        <option value="">Выберите город</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="nkoAddress">Адрес *</label>
                    <input type="text" class="form-input" id="nkoAddress" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="nkoPhone">Телефон</label>
                    <input type="tel" class="form-input" id="nkoPhone">
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="nkoWebsite">Веб-сайт</label>
                    <input type="url" class="form-input" id="nkoWebsite" placeholder="https://">
                </div>

                <div class="form-group">
                    <label class="form-label">Координаты на карте</label>
                    <div class="map-picker" id="mapPicker" style="height: 200px; margin-top: 10px; border: 1px solid #ddd; border-radius: 4px;">
                        <!-- Small map for coordinate selection -->
                    </div>
                    <div class="coordinates-display">
                        <span>Широта: <span id="latDisplay">55.75</span></span>
                        <span>Долгота: <span id="lngDisplay">37.62</span></span>
                    </div>
                </div>
                
                <div class="form-actions">
                    <button type="button" class="btn btn-outline" id="cancelAddNko">Отмена</button>
                    <button type="submit" class="btn btn-primary">Отправить на модерацию</button>
                </div>
            </form>
        </div>
    </div>

<!-- Profile Modal -->
<div class="modal" id="profileModal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 class="modal-title">Личный кабинет</h2>
            <button class="close-modal" id="closeProfileModal">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="profile-content">
            <div class="profile-header">
                <div class="avatar">
                    <i class="fas fa-user-circle"></i>
                </div>
                <div class="profile-info">
                    <h3 id="profileName">Имя Фамилия</h3>
                    <span class="user-role" id="profileRole">Пользователь</span>
                    <p id="profileEmail">email@example.com</p>
                </div>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="statTotal">0</div>
                    <div class="stat-label">Всего НКО</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="statApproved">0</div>
                    <div class="stat-label">Одобрено</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="statPending">0</div>
                    <div class="stat-label">На модерации</div>
                </div>
            </div>

            <div class="profile-section">
                <h4>Мои организации</h4>
                <div class="user-npos" id="userNposList">
                    <div class="loading">Загрузка...</div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Admin Panel Modal -->
<div class="modal" id="adminModal">
    <div class="modal-content admin-modal">
        <div class="modal-header">
            <h2 class="modal-title">Панель администратора</h2>
            <button class="close-modal" id="closeAdminModal">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="admin-tabs">
            <div class="admin-tab active" data-tab="moderation">Модерация</div>
            <div class="admin-tab" data-tab="statistics">Статистика</div>
            <div class="admin-tab" data-tab="users">Пользователи</div>
        </div>

        <div class="admin-content">
            <!-- Moderation Tab -->
            <div class="admin-tab-content active" id="moderationTab">
                <div class="moderation-header">
                    <h3>Организации на модерации</h3>
                    <div class="moderation-stats">
                        <span class="badge pending" id="pendingCount">0 на проверке</span>
                    </div>
                </div>
                <div class="moderation-list" id="moderationList">
                    <div class="loading">Загрузка...</div>
                </div>
            </div>

            <!-- Statistics Tab -->
            <div class="admin-tab-content" id="statisticsTab">
                <h3>Общая статистика</h3>
                <div class="stats-grid admin-stats">
                    <div class="stat-card">
                        <div class="stat-number" id="adminTotalNPOs">0</div>
                        <div class="stat-label">Всего НКО</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="adminApprovedNPOs">0</div>
                        <div class="stat-label">Одобрено</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="adminPendingNPOs">0</div>
                        <div class="stat-label">На модерации</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="adminTotalUsers">0</div>
                        <div class="stat-label">Пользователей</div>
                    </div>
                </div>
            </div>

            <!-- Users Tab -->
            <div class="admin-tab-content" id="usersTab">
                <h3>Пользователи системы</h3>
                <div class="users-list" id="usersList">
                    <div class="loading">Загрузка...</div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- NPO Status Badges (добавьте в CSS классы) -->
<style>
.status-badge {
    padding: 4px 8px;
    border-radius: 12px;
    font-size: 12px;
    font-weight: 500;
}

.status-pending {
    background-color: #ffc107;
    color: #000;
}

.status-approved {
    background-color: #28a745;
    color: #fff;
}

.status-rejected {
    background-color: #dc3545;
    color: #fff;
}

.user-role {
    padding: 4px 8px;
    border-radius: 12px;
    font-size: 12px;
    font-weight: 500;
}

.role-user {
    background-color: #6c757d;
    color: #fff;
}

.role-admin {
    background-color: #007bff;
    color: #fff;
}
</style>
    <script src="/script.js"></script>
</body>
</html>