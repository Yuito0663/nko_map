<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Карта добрых дел - НКО городов Росатома</title>
    <meta name="description" content="Интерактивная карта некоммерческих организаций в городах присутствия Росатома">
    <link rel="stylesheet" href="/style.css">
    <link rel="icon" type="image/svg+xml" href="../img/favicon.svg">
    <link rel="alternate icon" href="../img/favicon.ico" type="image/x-icon">
    <title>Карта добрых дел - НКО городов Росатома</title>
    <!-- Leaflet CSS & JS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <img src="data:image/png;base64,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" alt="Росатом" class="logo-image">
                <span class="logo-text">Карта добрых дел</span>
            </div> 
            <div class="nav-buttons">
                <button class="btn btn-outline" id="helpBtn">
                    <i class="fas fa-question-circle"></i> Помощь
                </button>
                <button class="btn btn-primary" id="loginBtn">
                    <i class="fas fa-user"></i> Войти
                </button>
                <button class="btn btn-secondary" id="addNkoBtn">
                    <i class="fas fa-plus"></i> Добавить НКО
                </button>
            </div>
        </header>
        
        <div class="main-content">
            <button class="toggle-sidebar btn btn-primary">
                <i class="fas fa-filter"></i> Фильтры
            </button>
            
            <aside class="sidebar">
                <div class="sidebar-section">
                    <h3 class="sidebar-title">Поиск</h3>
                    <div class="filter-group">
                        <input type="text" class="search-input" placeholder="Название НКО..." id="searchInput">
                    </div>
                </div>
                
                <div class="sidebar-section">
                    <h3 class="sidebar-title">Города</h3>
                    <div class="filter-group">
                        <select class="select-input" id="citySelect">
                            <option value="">Все города</option>
                        </select>
                    </div>
                </div>
                
                <div class="sidebar-section">
                    <h3 class="sidebar-title">Категории</h3>
                    <div class="checkbox-group" id="categoryFilter">
                    </div>
                </div>
                
                <div class="sidebar-section">
                    <h3 class="sidebar-title">Организации</h3>
                    <div class="nko-list" id="nkoList">
                        <div class="loading">Загрузка организаций...</div>
                    </div>
                </div>
            </aside>
            
            <div class="map-container">
                <div id="map"></div>
                
                <div class="nko-card" id="nkoCard">
                    <div class="card-header">
                        <div>
                            <h3 class="card-title" id="cardTitle">Название организации</h3>
                            <span class="card-category" id="cardCategory">Категория</span>
                        </div>
                        <button class="close-card" id="closeCard">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    
                    <div class="card-content">
                        <div class="card-field">
                            <div class="field-icon">
                                <i class="fas fa-info-circle"></i>
                            </div>
                            <div>
                                <p id="cardDescription">Описание деятельности организации</p>
                                <p class="mt-10" id="cardVolunteer">Функционал волонтеров</p>
                            </div>
                        </div>
                        
                        <div class="card-field">
                            <div class="field-icon">
                                <i class="fas fa-map-marker-alt"></i>
                            </div>
                            <div id="cardAddress">Адрес организации</div>
                        </div>
                        
                        <div class="card-field">
                            <div class="field-icon">
                                <i class="fas fa-phone"></i>
                            </div>
                            <div id="cardPhone">Контактный телефон</div>
                        </div>
                        
                        <div class="card-field">
                            <div class="field-icon">
                                <i class="fas fa-globe"></i>
                            </div>
                            <div id="cardWebsite">Сайт организации</div>
                        </div>
                    </div>
                    
                    <div class="social-links" id="cardSocial">
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Auth Modal -->
    <div class="modal" id="authModal">
        <div class="modal-content">
            <div class="tabs">
                <div class="tab active" data-tab="login">Вход</div>
                <div class="tab" data-tab="register">Регистрация</div>
            </div>
            
            <div class="modal-header">
                <h2 class="modal-title" id="modalTitle">Вход в аккаунт</h2>
            </div>
            
            <form id="authForm">
                <div class="form-group">
                    <label class="form-label" for="email">Электронная почта</label>
                    <input type="email" class="form-input" id="email" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="password">Пароль</label>
                    <input type="password" class="form-input" id="password" required>
                </div>
                
                <div class="form-group" id="nameFields" style="display: none;">
                    <label class="form-label" for="firstName">Имя</label>
                    <input type="text" class="form-input" id="firstName">
                    
                    <label class="form-label" for="lastName">Фамилия</label>
                    <input type="text" class="form-input" id="lastName">
                </div>
                
                <div class="form-actions">
                    <a href="#" class="form-link" id="forgotPassword">Забыли пароль?</a>
                    <button type="submit" class="btn btn-primary" id="submitAuth">
                        Войти
                    </button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Add NKO Modal -->
    <div class="modal" id="addNkoModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Добавить новую организацию</h2>
            </div>
            
            <form id="addNkoForm">
                <div class="form-group">
                    <label class="form-label" for="nkoName">Название организации *</label>
                    <input type="text" class="form-input" id="nkoName" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="nkoCategory">Категория деятельности *</label>
                    <select class="form-input" id="nkoCategory" required>
                        <option value="">Выберите категорию</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="nkoDescription">Описание деятельности *</label>
                    <textarea class="form-input" id="nkoDescription" rows="3" required placeholder="2-3 предложения о деятельности организации"></textarea>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="nkoVolunteer">Функционал волонтеров *</label>
                    <textarea class="form-input" id="nkoVolunteer" rows="2" required placeholder="Чем могут помочь волонтеры"></textarea>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="nkoCity">Город *</label>
                    <select class="form-input" id="nkoCity" required>
                        <option value="">Выберите город</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="nkoAddress">Адрес *</label>
                    <input type="text" class="form-input" id="nkoAddress" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="nkoPhone">Телефон</label>
                    <input type="tel" class="form-input" id="nkoPhone">
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="nkoWebsite">Веб-сайт</label>
                    <input type="url" class="form-input" id="nkoWebsite" placeholder="https://">
                </div>

                <div class="form-group">
                    <label class="form-label">Координаты на карте</label>
                    <div class="map-picker" id="mapPicker" style="height: 200px; margin-top: 10px; border: 1px solid #ddd; border-radius: 4px;">
                        <!-- Small map for coordinate selection -->
                    </div>
                    <div class="coordinates-display">
                        <span>Широта: <span id="latDisplay">55.75</span></span>
                        <span>Долгота: <span id="lngDisplay">37.62</span></span>
                    </div>
                </div>
                
                <div class="form-actions">
                    <button type="button" class="btn btn-outline" id="cancelAddNko">Отмена</button>
                    <button type="submit" class="btn btn-primary">Отправить на модерацию</button>
                </div>
            </form>
        </div>
    </div>

<!-- Profile Modal -->
<div class="modal" id="profileModal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 class="modal-title">Личный кабинет</h2>
            <button class="close-modal" id="closeProfileModal">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="profile-content">
            <div class="profile-header">
                <div class="avatar">
                    <i class="fas fa-user-circle"></i>
                </div>
                <div class="profile-info">
                    <h3 id="profileName">Имя Фамилия</h3>
                    <span class="user-role" id="profileRole">Пользователь</span>
                    <p id="profileEmail">email@example.com</p>
                </div>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="statTotal">0</div>
                    <div class="stat-label">Всего НКО</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="statApproved">0</div>
                    <div class="stat-label">Одобрено</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="statPending">0</div>
                    <div class="stat-label">На модерации</div>
                </div>
            </div>

            <div class="profile-section">
                <h4>Мои организации</h4>
                <div class="user-npos" id="userNposList">
                    <div class="loading">Загрузка...</div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Admin Panel Modal -->
<div class="modal" id="adminModal">
    <div class="modal-content admin-modal">
        <div class="modal-header">
            <h2 class="modal-title">Панель администратора</h2>
            <button class="close-modal" id="closeAdminModal">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="admin-tabs">
            <div class="admin-tab active" data-tab="moderation">Модерация</div>
            <div class="admin-tab" data-tab="statistics">Статистика</div>
            <div class="admin-tab" data-tab="users">Пользователи</div>
        </div>

        <div class="admin-content">
            <!-- Moderation Tab -->
            <div class="admin-tab-content active" id="moderationTab">
                <div class="moderation-header">
                    <h3>Организации на модерации</h3>
                    <div class="moderation-stats">
                        <span class="badge pending" id="pendingCount">0 на проверке</span>
                    </div>
                </div>
                <div class="moderation-list" id="moderationList">
                    <div class="loading">Загрузка...</div>
                </div>
            </div>

            <!-- Statistics Tab -->
            <div class="admin-tab-content" id="statisticsTab">
                <h3>Общая статистика</h3>
                <div class="stats-grid admin-stats">
                    <div class="stat-card">
                        <div class="stat-number" id="adminTotalNPOs">0</div>
                        <div class="stat-label">Всего НКО</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="adminApprovedNPOs">0</div>
                        <div class="stat-label">Одобрено</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="adminPendingNPOs">0</div>
                        <div class="stat-label">На модерации</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="adminTotalUsers">0</div>
                        <div class="stat-label">Пользователей</div>
                    </div>
                </div>
            </div>

            <!-- Users Tab -->
            <div class="admin-tab-content" id="usersTab">
                <h3>Пользователи системы</h3>
                <div class="users-list" id="usersList">
                    <div class="loading">Загрузка...</div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- NPO Status Badges (добавьте в CSS классы) -->
<style>
.status-badge {
    padding: 4px 8px;
    border-radius: 12px;
    font-size: 12px;
    font-weight: 500;
}

.status-pending {
    background-color: #ffc107;
    color: #000;
}

.status-approved {
    background-color: #28a745;
    color: #fff;
}

.status-rejected {
    background-color: #dc3545;
    color: #fff;
}

.user-role {
    padding: 4px 8px;
    border-radius: 12px;
    font-size: 12px;
    font-weight: 500;
}

.role-user {
    background-color: #6c757d;
    color: #fff;
}

.role-admin {
    background-color: #007bff;
    color: #fff;
}
</style>
    <script src="/script.js"></script>
</body>
</html>